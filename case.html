<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DinoClone - –í—ñ–¥–∫—Ä–∏—Ç–∏ –ö–µ–π—Å</title>
  <!-- –°—Ç–∏–ª—ñ –¥–ª—è —Ö–µ–¥–µ—Ä–∞, —Ñ—É—Ç–µ—Ä–∞ —Ç–∞ –∑–∞–≥–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ —Å–∞–π—Ç—É -->
  <link rel="stylesheet" href="style1.css" />
  <!-- –°—Ç–∏–ª—ñ –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏ —Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ -->
  <link rel="stylesheet" href="style.css" /> 
</head>
<body>
  <!-- –•–µ–¥–µ—Ä (—ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π index.html) -->
  <header class="site-header">
    <div class="header-left">
      <a href="index.html" class="logo">
        <img src="logo.png" alt="DinoDrop Logo" /> <!-- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —à–ª—è—Ö –¥–æ logo.png –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π -->
      </a>
      <nav class="main-nav">
        <a href="contracts.html"><i class="icon">‚úíÔ∏è</i> –ö–û–ù–¢–†–ê–ö–¢–ò</a>
        <a href="upgrades.html"><i class="icon">‚è´</i> –£–õ–£–ß–®–ï–ù–ù–Ø</a>
        <a href="bonuses.html"><i class="icon">üéÅ</i> –ë–û–ù–£–°–ò</a>
        <a href="calendar.html">
          <i class="icon">üìÖ</i> –ö–ê–õ–ï–ù–î–ê–†
          <span class="badge-new">NEW</span>
        </a>
      </nav>
    </div>
    <div class="header-right">
      <a href="#" class="wallet-btn">üíº +</a>
      <div class="notifications">
        <i class="icon">üîî</i>
        <span class="notif-count">0</span>
      </div>
      <div class="user-profile">
        <img src="https://i.imgur.com/3MntK6X.png" alt="Avatar" />
        <span class="username">ENDLESS</span>
        <span class="balance">1.49 ü™ô</span>
      </div>
      <button class="settings-btn">‚öôÔ∏è</button>
      <div id="settings-modal" class="settings-modal hidden">
        <div class="settings-content">
          <h2>‚öôÔ∏è</h2>
          <label class="toggle-switch">
            <input type="checkbox" id="sound-toggle" checked>
            <span class="slider"></span>
          </label>
          <span class="toggle-label">–ó–≤—É–∫</span>
          <h3>–ü—ñ—Å–Ω—ñ</h3>
          <ul id="music-list">
            <li><audio controls src="music/Chrystal.mp3"></audio></li>
            <li><audio controls src="music/ICEGERGERT - Hoodtrapstar.mp3"></audio></li>
            <li><audio controls src="music/icegergert-casino.mp3"></audio></li>
            <li><audio controls src="music/ICEGERGERT & SKY RAE - –ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ.mp3"></audio></li>
            <li><audio controls src="music/your-song5.mp3"></audio></li>
            <li><audio controls src="music/your-song6.mp3"></audio></li>
            <li><audio controls src="music/your-song7.mp3"></audio></li>
            <li><audio controls src="music/your-song8.mp3"></audio></li>
            <li><audio controls src="music/your-song9.mp3"></audio></li>
            <li><audio controls src="music/your-song10.mp3"></audio></li>
          </ul>
          <button id="close-settings">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
      </div>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∫–µ–π—Å—É (–∑ —Ä—É–ª–µ—Ç–∫–æ—é) -->
  <main>
    <div class="container"> <!-- –¶–µ–π .container –∑—ñ style.css -->
      <h1 class="case-title">–ö–µ–π—Å: –ì–æ–ª–æ–≤–Ω–∏–π</h1>
      
      <div class="case-viewport">
        <div class="case-pointer"></div>
        <div class="case-items-reel" id="caseItemsReel">
          <!-- –ü—Ä–µ–¥–º–µ—Ç–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è JS -->
        </div>
      </div>

      <button class="open-button" onclick="startCaseOpening()">–í–Ü–î–ö–†–ò–¢–ò</button>
      
      <!-- –°–ü–ò–°–û–ö –ú–û–ñ–õ–ò–í–ò–• –ü–†–ï–î–ú–ï–¢–Ü–í -->
      <div class="case-content-details">
        <h2 class="possible-drops-title">–©–æ –º–æ–∂–µ –≤–∏–ø–∞—Å—Ç–∏:</h2>
        <div class="case-possible-drops" id="possibleDrops">
          <!-- –°—é–¥–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –≤—Å—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ –∫–µ–π—Å—É —á–µ—Ä–µ–∑ JS -->
        </div>
      </div>
      <!-- –ö–Ü–ù–ï–¶–¨ –°–ü–ò–°–ö–£ –ú–û–ñ–õ–ò–í–ò–• –ü–†–ï–î–ú–ï–¢–Ü–í -->

    </div>
  </main>

  <!-- –§—É—Ç–µ—Ä (—ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π index.html) -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-left">
        <h4>¬© 2025 DINOCLONE</h4>
        <p>–ù–∞–π–∫—Ä–∞—â—ñ –∫–µ–π—Å–∏ NFT</p>
        <ul class="footer-links">
          <li><a href="#">–ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∞</a></li>
          <li><a href="#">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∞ —É–≥–æ–¥–∞</a></li>
          <li><a href="#">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</a></li>
          <li><a href="#">–£–º–æ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</a></li>
          <li><a href="#">–ü–æ–ª—ñ—Ç–∏–∫–∞ AML</a></li>
          <li><a href="#">Cookies</a></li>
          <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
          <li><a href="#">FAQ</a></li>
        </ul>
        <a href="mailto:support@dinoclone.io" class="footer-email">
          <span class="email-icon">‚úâÔ∏è</span> support@dinoclone.io
        </a>
      </div>
      <div class="footer-center">
        <div class="footer-stats">
          <div>
            <img src="https://cdn-icons-png.flaticon.com/128/3039/3039436.png" alt="–ö–µ–π—Å–∏" />
            <strong>221 320 775</strong><br/>–í–Ü–î–ö–†–ò–¢–û –ö–ï–ô–°–Ü–í
          </div>
          <div>
            <img src="https://cdn-icons-png.flaticon.com/128/1828/1828817.png" alt="–ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏" />
            <strong>1 369 585</strong><br/>–ö–û–ù–¢–†–ê–ö–¢–Ü–í
          </div>
          <div>
            <img src="https://cdn-icons-png.flaticon.com/128/1828/1828925.png" alt="–ü–æ–∫—Ä–∞—â–µ–Ω—å" />
            <strong>68 854 668</strong><br/>–ü–û–õ–Ü–ü–®–ï–ù–¨
          </div>
        </div>
      </div>
      <div class="footer-right">
        <div class="social-icons">
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/128/3670/3670151.png" alt="Telegram" /></a>
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/128/2111/2111463.png" alt="Instagram" /></a>
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/128/1384/1384060.png" alt="YouTube" /></a>
        </div>
        <p class="footer-address">RIKAR, SIA ¬† ‚Ä¢ ¬† Gailezera iela 2‚Äì1, Riga, LV-1079</p>
      </div>
    </div>
  </footer>

  <script>
    const originalItems = [ 
      { name: 'Dragon Knife', price: 250, chance: 1, image: 'https://picsum.photos/id/10/200' },
      { name: 'Tiger AK', price: 120, chance: 5, image: 'https://picsum.photos/id/20/200' },
      { name: 'Ice M4', price: 90, chance: 8, image: 'https://picsum.photos/id/30/200' },
      { name: 'Black Pistol', price: 45, chance: 15, image: 'https://picsum.photos/id/40/200' },
      { name: 'Flash', price: 10, chance: 30, image: 'https://picsum.photos/id/50/200' },
      { name: 'Toxic Gun', price: 65, chance: 10, image: 'https://picsum.photos/id/60/200' },
      { name: 'Gold Rifle', price: 200, chance: 2, image: 'https://picsum.photos/id/70/200' },
      { name: 'Mystic Wand', price: 35, chance: 18, image: 'https://picsum.photos/id/80/200' },
      { name: 'Cyber SMG', price: 55, chance: 12, image: 'https://picsum.photos/id/90/200' },
      { name: 'Shadow Glock', price: 85, chance: 9, image: 'https://picsum.photos/id/100/200' },
      { name: 'Phoenix Shotgun', price: 140, chance: 3, image: 'https://picsum.photos/id/110/200' },
      { name: 'Tornado Uzi', price: 70, chance: 7, image: 'https://picsum.photos/id/120/200' },
      { name: 'Venom AR', price: 100, chance: 6, image: 'https://picsum.photos/id/130/200' },
      { name: 'Aqua Sniper', price: 160, chance: 4, image: 'https://picsum.photos/id/140/200' },
      { name: 'Basic Pistol', price: 5, chance: 40, image: 'https://picsum.photos/id/150/200' }
    ];

    const reelElement = document.getElementById('caseItemsReel');
    const openCaseButton = document.querySelector('.open-button');
    const viewportElement = document.querySelector('.case-viewport');
    const possibleDropsContainer = document.getElementById('possibleDrops'); // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫—É –º–æ–∂–ª–∏–≤–∏—Ö –¥—Ä–æ–ø—ñ–≤

    const ITEM_BASE_WIDTH = 140; 
    const ITEM_MARGIN_HORIZONTAL = 10;         
    const EFFECTIVE_ITEM_WIDTH = ITEM_BASE_WIDTH + (ITEM_MARGIN_HORIZONTAL * 2); 

    const REEL_ITEMS_COUNT_MULTIPLIER = 7; 
    let isSpinningActive = false;
    let generatedReelElements = []; 

    function shuffleItemsArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function populateReelWithItems(winningItemDataForReel) {
      reelElement.innerHTML = ''; 
      reelElement.style.transition = 'none'; 
      reelElement.style.transform = 'translateX(0px)'; 
      reelElement.classList.remove('reel-has-winner'); 
      generatedReelElements = []; 

      let tempReelItems = [];
      for (let i = 0; i < REEL_ITEMS_COUNT_MULTIPLIER; i++) {
        tempReelItems.push(...shuffleItemsArray([...originalItems])); 
      }
      
      const targetStopIndex = Math.floor(tempReelItems.length * 0.8) + Math.floor(Math.random() * 5);
      const winnerCloneInReel = { ...winningItemDataForReel, _isWinnerPlaceholder: true };
      tempReelItems.splice(targetStopIndex, 0, winnerCloneInReel); 

      tempReelItems.forEach((itemData) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'case-item';
        itemDiv.dataset.name = itemData.name;
        itemDiv.dataset.price = itemData.price;
        itemDiv.dataset.chance = itemData.chance;
        itemDiv.dataset.image = itemData.image;

        itemDiv.innerHTML = `
          <img src="${itemData.image}" alt="${itemData.name}" />
          <div class="details">
            <div class="name">${itemData.name}</div>
            <div class="price">$${itemData.price}</div>
            <div class="chance">${itemData.chance}%</div>
          </div>
        `;
        reelElement.appendChild(itemDiv);
        generatedReelElements.push(itemDiv); 
      });
      
      const actualWinnerDomIndex = generatedReelElements.findIndex(el => el.dataset.name === winningItemDataForReel.name && tempReelItems[generatedReelElements.indexOf(el)]._isWinnerPlaceholder);
      
      if (actualWinnerDomIndex !== -1) {
        const originalWinnerDataObj = tempReelItems[actualWinnerDomIndex];
        if (originalWinnerDataObj && originalWinnerDataObj._isWinnerPlaceholder) {
            delete originalWinnerDataObj._isWinnerPlaceholder;
        }
        return actualWinnerDomIndex;
      }
      return targetStopIndex;
    }

    function determineWinningItem() {
      const totalChanceSum = originalItems.reduce((sum, item) => sum + item.chance, 0);
      let randomNumber = Math.random() * totalChanceSum;
      let cumulativeChance = 0;

      for (const item of originalItems) {
        cumulativeChance += item.chance;
        if (randomNumber <= cumulativeChance) {
          return item; 
        }
      }
      return originalItems[originalItems.length - 1]; 
    }

    function displayPossibleDrops() {
        if (!possibleDropsContainer) return;
        possibleDropsContainer.innerHTML = ''; 

        const sortedItems = [...originalItems].sort((a, b) => a.chance - b.chance || b.price - a.price);

        sortedItems.forEach(itemData => {
            const dropDiv = document.createElement('div');
            dropDiv.className = 'possible-drop-item';
            dropDiv.innerHTML = `
                <img src="${itemData.image}" alt="${itemData.name}" />
                <div class="name">${itemData.name}</div>
                <div class="price">$${itemData.price}</div>
                <div class="chance">${itemData.chance}%</div>
            `;
            possibleDropsContainer.appendChild(dropDiv);
        });
    }
     
    async function startCaseOpening() {
      if (isSpinningActive) return; 

      isSpinningActive = true;
      openCaseButton.disabled = true;

      generatedReelElements.forEach(el => el.classList.remove('is-winner'));
      reelElement.classList.remove('reel-has-winner');

      const winningItemObject = determineWinningItem();
      const winningItemDomIndex = populateReelWithItems(winningItemObject);
     
      await new Promise(resolve => setTimeout(resolve, 60)); 

      const targetHtmlElement = generatedReelElements[winningItemDomIndex]; 
      if (!targetHtmlElement) {
        console.error("Winning DOM element not found in the reel!");
        isSpinningActive = false;
        openCaseButton.disabled = false;
        return;
      }

      const viewportCenterX = viewportElement.offsetWidth / 2;
      const targetElementOffset = targetHtmlElement.offsetLeft;
      const targetElementWidthForCalc = EFFECTIVE_ITEM_WIDTH; 
      const randomPixelOffset = (Math.random() - 0.5) * (targetElementWidthForCalc * 0.3); 
      let finalScrollToX = viewportCenterX - targetElementOffset - (targetElementWidthForCalc / 2) + randomPixelOffset;
      const minScrollPosition = 0; 
      const maxScrollPosition = -(reelElement.scrollWidth - viewportElement.offsetWidth);
      finalScrollToX = Math.max(maxScrollPosition, Math.min(minScrollPosition, finalScrollToX));
      const animationTimeMs = 4500 + Math.random() * 2000; 
      reelElement.style.transition = `transform ${animationTimeMs / 1000}s cubic-bezier(0.15, 0.7, 0.25, 1)`; 
      reelElement.style.transform = `translateX(${finalScrollToX}px)`;
     
      reelElement.addEventListener('transitionend', function handleSpinEnd() {
        reelElement.removeEventListener('transitionend', handleSpinEnd); 

        targetHtmlElement.classList.add('is-winner');
        reelElement.classList.add('reel-has-winner');
            
        isSpinningActive = false;
        openCaseButton.disabled = false;
      }, { once: true }); 
    }

    // –í–ò–ö–õ–ò–ö–ò –§–£–ù–ö–¶–Ü–ô –ü–†–ò –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ü
    populateReelWithItems(originalItems[Math.floor(Math.random() * originalItems.length)]);
    displayPossibleDrops(); 

    // --- JS –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (–¢–û–ß–ù–û –Ø–ö –ù–ê INDEX.HTML) ---
    const settingsBtn = document.querySelector(".settings-btn");
    const settingsModal = document.getElementById("settings-modal");
    const closeBtn = document.getElementById("close-settings"); 
    const soundToggle = document.getElementById("sound-toggle");

    if (settingsBtn && settingsModal && closeBtn) { 
        settingsBtn.addEventListener("click", () => {
            settingsModal.classList.remove("hidden");
        });

        closeBtn.addEventListener("click", () => { 
            settingsModal.classList.add("hidden");
        });

        settingsModal.addEventListener('click', (event) => {
            if (event.target === settingsModal) {
                settingsModal.classList.add("hidden");
            }
        });
    }
    
    if (soundToggle) {
        soundToggle.addEventListener("change", () => {
            const audios = document.querySelectorAll("audio");
            audios.forEach(audio => {
            audio.muted = !soundToggle.checked;
            });
        });
    }


    
    // --- –ö—ñ–Ω–µ—Ü—å JS –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ ---
  </script>
  <audio id="reelSpinSound" src="go-new-gambling.mp3" preload="auto"></audio>
</body>
</html>